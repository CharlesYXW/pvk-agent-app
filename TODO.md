# ✅ TODO 清单

> 依据现有代码与规划梳理的任务列表，按优先级分层管理，便于逐项落地。

## 🟢 Quick Wins（1-2 周）

- [x] **导航与布局优化** ✅ 已完成 (2025-10-22)
  - **目标**：让核心功能入口更集中、层级更清晰，降低首次使用的学习成本。
  - **实施要点**：评估 Streamlit `st.navigation` 或自定义标签页方案；统一页面标题与说明；在内容区域引入卡片式布局。
  - **预期产出**：新版导航结构、组件封装代码、更新后的页面截图。
  - **注意事项**：保持现有页面状态管理逻辑，避免破坏 `st.session_state` 的会话历史。
  - **实现细节**：
    - ✅ 为每个页面添加图标和描述
    - ✅ 当前页面高亮显示（primary 按钮）
    - ✅ 所有页面头部采用渐变色卡片设计
    - ✅ 侧边栏新增快捷操作区
    - ✅ 按钮增加悬停动效

- [x] **配置状态提示面板** ✅ 已完成 (2025-10-22)
  - **目标**：在应用顶部实时展示 API Key、知识库索引、数据文件等依赖是否就绪，减少排障时间。
  - **实施要点**：封装一个 `check_system_status()` 工具函数；在 UI 中以信息条/提示卡形式展示状态；提供一键复制构建索引或设置环境变量的命令。
  - **预期产出**：状态检测模块、相关 UI 组件、README 中的使用说明更新。
  - **注意事项**：避免频繁 IO 或阻塞操作，可使用缓存与容错。
  - **实现细节**：
    - ✅ 创建 `system_status.py` 模块
    - ✅ 实现 6 项关键检查：API密钥、知识库索引、知识文档、XRD数据、训练数据、运行环境
    - ✅ 根据整体健康状态自动展开/折叠面板
    - ✅ 为未就绪项目提供修复命令
    - ✅ 添加“刷新状态”按钮

- [ ] **文献检索结果缓存与去重**
  - **目标**：为 arXiv 检索新增缓存机制，降低 API 调用频率并提升交互体验。
  - **实施要点**：基于关键词+时间范围生成缓存键；使用 `st.cache_data` 或轻量级本地缓存；对比 DOI/entry_id 进行去重；提供“强制刷新”按钮。
  - **预期产出**：缓存策略实现、命中/失效率日志打印、性能对比记录。
  - **注意事项**：控制缓存过期时间，防止长期使用造成信息滞后。

- [ ] **模型输入校验与提示**
  - **目标**：在性能预测与实验优化模块中，对输入参数进行有效性检查，预防异常或越界值导致的错误预测。
  - **实施要点**：统一封装参数上下限；加入输入合法性提示和颜色标注；必要时对超出范围的参数进行裁剪或提醒。
  - **预期产出**：输入校验函数、UI 提示文案、单元测试覆盖主要边界场景。
  - **注意事项**：提示信息保持专业且友好，避免阻断正常操作流程。

- [ ] **搜索空间配置抽象**
  - **目标**：将 `find_optimal_params` 的参数网格由硬编码改为配置驱动，方便后续按数据规模调整。
  - **实施要点**：提取配置文件或常量模块；支持多套预设（演示版/生产版）；在 UI 中提供搜索范围预览。
  - **预期产出**：配置模块、重构后的优化函数、相关文档说明。
  - **注意事项**：保持默认体验不变，确保历史功能稳定。

## 🟡 中期建设（1-2 个月）

- [ ] **知识库多格式导入**
  - **目标**：支持 `PDF`/`DOCX`/Markdown 等格式自动转换为纯文本并入索引，扩充知识库适用范围。
  - **实施要点**：引入 `pdfplumber`、`python-docx` 等解析库；抽象统一的文件处理管线；新增错误日志与导入成功统计。
  - **预期产出**：多格式解析模块、批量导入脚本、更新后的知识库构建流程文档。
  - **注意事项**：关注解析准确率与字符编码，避免引入安全风险（如恶意宏）。

- [ ] **知识库管理面板**
  - **目标**：提供可视化界面展示当前文档、索引状态、使用统计，支持一键重建索引。
  - **实施要点**：设计独立页面或抽屉式面板；整合文档列表、最近更新记录、索引大小等信息；支持下载日志。
  - **预期产出**：管理面板 UI、后台数据接口、权限控制（基础版可先全量开放）。
  - **注意事项**：重建索引操作需二次确认，避免误触导致服务短暂停机。

- [ ] **文献订阅与简报推送**
  - **目标**：允许用户设置关键词并定时生成科研简报，通过邮件或企业 IM 推送。
  - **实施要点**：建立订阅配置存储（本地 JSON / 数据库）；支持定时任务（`apscheduler` 或外部 CI）；整合现有 `literature_retriever.py`；输出多格式摘要。
  - **预期产出**：订阅管理 UI、定时任务脚本、推送渠道适配（邮箱/Webhook）。
  - **注意事项**：控制请求频率，避免触发外部 API 限制；提供取消订阅入口。

- [ ] **性能预测升级（贝叶斯优化）**
  - **目标**：引入贝叶斯优化或高斯过程模型，提升参数推荐质量并提供不确定性量化。
  - **实施要点**：调研 `scikit-optimize`/`Ax` 等框架；重构训练管线；引入可视化（如响应面、置信区间）。
  - **预期产出**：新算法模块、模型评估报告、实验对比结论文档。
  - **注意事项**：确保与现有随机森林方案可互换，保留回退机制。

- [ ] **实验操作日志系统**
  - **目标**：记录每次分析/预测/优化的输入参数、输出结果和时间戳，便于审计与复现。
  - **实施要点**：设计统一日志数据结构；支持在 UI 中按时间筛选；提供导出功能（CSV/JSON）。
  - **预期产出**：日志写入模块、前端展示/筛选界面、示例数据。
  - **注意事项**：注意敏感信息脱敏；控制日志体积，必要时设置滚动策略。

## 🔵 长期规划

- [ ] **多实验类型分析套件**
  - **目标**：扩展至 PL、SEM、IV 等数据类型，提供统一上传、解析、可视化与指标计算流程。
  - **实施要点**：逐类调研数据格式与分析需求；封装适配器；构建设计统一的指标输出模板。
  - **预期产出**：多类型分析模块、标准化报告模板、示例数据集。
  - **注意事项**：优先支持公司常见设备格式，确保计算结果得到专家验证。

- [ ] **工作流自动化与任务链**
  - **目标**：允许用户创建“知识检索 → 数据分析 → 实验设计”等任务链并一键执行。
  - **实施要点**：设计工作流引擎或简易编排逻辑；支持节点配置、状态跟踪与失败重试；提供可视化流程图。
  - **预期产出**：任务链定义规范、执行调度模块、典型工作流模板。
  - **注意事项**：初期可限制节点类型，逐步扩展；考虑长耗时任务的后台运行机制。

- [ ] **多用户与权限体系**
  - **目标**：根据角色（研究员、管理员、访客）控制功能与数据可见范围，满足团队协作需求。
  - **实施要点**：设计用户模型与权限矩阵；实现登录/认证方式（本地账号或 SSO）；在各模块中接入权限校验。
  - **预期产出**：权限控制中间层、用户管理界面、权限测试用例。
  - **注意事项**：重视安全性与合规性，敏感操作需审计记录。

- [ ] **外部系统对接（LIMS/ELN）**
  - **目标**：与现有实验室系统或内部数据平台打通，实现数据自动流转。
  - **实施要点**：调研目标系统 API；设计数据映射与同步策略；实现 webhook 或批量导入流程。
  - **预期产出**：对接方案文档、接口适配模块、端到端演示案例。
  - **注意事项**：确保数据安全传输；兼顾离线备份与异常恢复。

- [ ] **全文深入研究功能（文献深读）**
  - **目标**：完成论文 PDF 下载、章节拆分与 Map-Reduce 摘要逻辑，输出结构化关键信息。
  - **实施要点**：实现全文抓取与解析；引入长文分块策略；设计提取模板（目标/方法/结果/结论）；提供可视化摘要。
  - **预期产出**：深度分析模块、性能测试（长文本处理耗时）、示例结果展示。
  - **注意事项**：尊重版权与访问限制；对长文处理需做异常捕获与超时控制。
